# Home Assistant Scripts for Ollama Chat

# Main conversation handler with Ollama
ollama_conversation_handler:
  description: "Handle conversation through Ollama"
  fields:
    text:
      description: "User input text"
      required: true
  sequence:
    - service: rest_command.ollama_chat
      data:
        prompt: |
          You are a helpful smart home assistant named "Otthon Asszisztens" (Home Assistant in Hungarian).
          You help users control their smart home devices and answer questions.
          Be concise, friendly, and helpful. Answer in Hungarian.
          
          User: {{ text }}
          Assistant:
        temperature: 0.7
        max_tokens: 256
      response_variable: ollama_response
    - service: notify.persistent_notification
      data:
        title: "Ollama v√°lasz"
        message: "{{ ollama_response }}"

ollama_simple_chat:
  description: "Send a simple message to Ollama and get response"
  fields:
    message:
      description: "The message to send"
      required: true
  sequence:
    - service: rest_command.ollama_chat
      data:
        prompt: "{{ message }}"
        temperature: 0.7
        max_tokens: 256
    - service: input_text.set_value
      target:
        entity_id: input_text.ollama_response
      data:
        value: "Generating response..."

ollama_system_prompt_chat:
  description: "Chat with Ollama with system prompt context"
  fields:
    system_prompt:
      description: "System prompt to guide the model"
      required: true
    user_message:
      description: "User message"
      required: true
  sequence:
    - service: rest_command.ollama_chat
      data:
        prompt: |
          [SYSTEM]
          {{ system_prompt }}
          
          [USER]
          {{ user_message }}
          
          [ASSISTANT]
        temperature: 0.5
        max_tokens: 512

ollama_code_generation:
  description: "Generate code using Ollama"
  fields:
    language:
      description: "Programming language"
      required: true
    description:
      description: "What code to generate"
      required: true
  sequence:
    - service: rest_command.ollama_chat
      data:
        prompt: |
          Generate {{ language }} code for the following:
          {{ description }}
          
          Code:
        temperature: 0.2
        max_tokens: 1024

ollama_translation:
  description: "Translate text using Ollama"
  fields:
    text:
      description: "Text to translate"
      required: true
    target_language:
      description: "Target language"
      required: true
  sequence:
    - service: rest_command.ollama_chat
      data:
        prompt: |
          Translate the following text to {{ target_language }}:
          {{ text }}
          
          Translation:
        temperature: 0.3
        max_tokens: 256

ollama_summarize:
  description: "Summarize text using Ollama"
  fields:
    text:
      description: "Text to summarize"
      required: true
  sequence:
    - service: rest_command.ollama_chat
      data:
        prompt: |
          Summarize the following text in 2-3 sentences:
          {{ text }}
          
          Summary:
        temperature: 0.5
        max_tokens: 256
